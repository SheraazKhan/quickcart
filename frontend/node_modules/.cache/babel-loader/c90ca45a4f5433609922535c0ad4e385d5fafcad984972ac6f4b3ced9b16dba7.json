{"ast":null,"code":"var _jsxFileName = \"D:\\\\Quickcart\\\\frontend\\\\src\\\\pages\\\\EditProduct.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport axios from \"axios\";\nimport API_BASE_URL from \"../utils/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SUGGESTED_CATEGORIES = [\"Laptops\", \"Phones\", \"Headphones\", \"Gaming\", \"Home\", \"Accessories\"];\nconst EditProduct = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const [form, setForm] = useState({\n    name: \"\",\n    price: \"\",\n    description: \"\",\n    category: \"\",\n    stock: \"\",\n    image: \"\"\n  });\n  const [file, setFile] = useState(null);\n  const [preview, setPreview] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [submitting, setSubmitting] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [banner, setBanner] = useState({\n    text: \"\",\n    ok: true\n  });\n  const token = localStorage.getItem(\"token\");\n  const fileInputRef = useRef(null);\n\n  // Helpers\n  const authHeader = token ? {\n    Authorization: `Bearer ${token}`\n  } : {};\n  const getProductImage = img => {\n    if (!img) return \"/placeholder.jpg\";\n    if (typeof img === \"string\") {\n      if (/^https?:\\/\\//i.test(img)) return img;\n      return `${API_BASE_URL}${img.startsWith(\"/\") ? \"\" : \"/\"}${img}`;\n    }\n    if (img !== null && img !== void 0 && img.url) return img.url;\n    return \"/placeholder.jpg\";\n  };\n\n  // Load product\n  useEffect(() => {\n    let mounted = true;\n    const load = async () => {\n      try {\n        var _product$price, _ref, _product$stock;\n        setLoading(true);\n        // Prefer GET /api/products/:id; fall back to list if needed\n        let product;\n        try {\n          const {\n            data\n          } = await axios.get(`${API_BASE_URL}/api/products/${id}`);\n          product = data;\n        } catch {\n          const {\n            data\n          } = await axios.get(`${API_BASE_URL}/api/products`);\n          product = Array.isArray(data) ? data.find(p => p._id === id) : null;\n        }\n        if (!product) {\n          setBanner({\n            text: \"Product not found.\",\n            ok: false\n          });\n          return;\n        }\n        if (!mounted) return;\n        setForm({\n          name: product.name || \"\",\n          price: (_product$price = product.price) !== null && _product$price !== void 0 ? _product$price : \"\",\n          description: product.description || \"\",\n          category: product.category || \"\",\n          stock: (_ref = (_product$stock = product.stock) !== null && _product$stock !== void 0 ? _product$stock : product.countInStock) !== null && _ref !== void 0 ? _ref : \"\",\n          image: product.image || \"\"\n        });\n      } catch (err) {\n        console.error(\"Error fetching product:\", err);\n        setBanner({\n          text: \"Failed to load product.\",\n          ok: false\n        });\n      } finally {\n        if (mounted) setLoading(false);\n      }\n    };\n    load();\n    return () => {\n      mounted = false;\n      if (preview) URL.revokeObjectURL(preview);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [id]);\n\n  // Field handlers\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    // basic numeric guards\n    if (name === \"price\" && Number(value) < 0) return;\n    if (name === \"stock\" && Number(value) < 0) return;\n    setForm(f => ({\n      ...f,\n      [name]: value\n    }));\n  };\n  const setImageFile = f => {\n    var _f$type, _f$type$startsWith;\n    if (!f) return;\n    if (!((_f$type = f.type) !== null && _f$type !== void 0 && (_f$type$startsWith = _f$type.startsWith) !== null && _f$type$startsWith !== void 0 && _f$type$startsWith.call(_f$type, \"image/\"))) {\n      setBanner({\n        text: \"Please choose an image file.\",\n        ok: false\n      });\n      return;\n    }\n    setFile(f);\n    const url = URL.createObjectURL(f);\n    setPreview(old => {\n      if (old) URL.revokeObjectURL(old);\n      return url;\n    });\n  };\n  const handleFileChange = e => {\n    var _e$target$files;\n    return setImageFile((_e$target$files = e.target.files) === null || _e$target$files === void 0 ? void 0 : _e$target$files[0]);\n  };\n\n  // Drag & drop\n  const onDrop = e => {\n    var _e$dataTransfer$files;\n    e.preventDefault();\n    e.stopPropagation();\n    setImageFile((_e$dataTransfer$files = e.dataTransfer.files) === null || _e$dataTransfer$files === void 0 ? void 0 : _e$dataTransfer$files[0]);\n  };\n  const onDragOver = e => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n  const clearSelectedImage = () => {\n    setFile(null);\n    if (preview) URL.revokeObjectURL(preview);\n    setPreview(null);\n    if (fileInputRef.current) fileInputRef.current.value = \"\";\n  };\n  const validate = () => {\n    if (!form.name.trim()) return \"Name is required.\";\n    if (form.price === \"\" || isNaN(Number(form.price))) return \"Valid price is required.\";\n    if (!form.description.trim()) return \"Description is required.\";\n    if (!form.category.trim()) return \"Category is required.\";\n    if (form.stock === \"\" || isNaN(Number(form.stock))) return \"Valid stock is required.\";\n    return null;\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const err = validate();\n    if (err) {\n      setBanner({\n        text: err,\n        ok: false\n      });\n      return;\n    }\n    const formData = new FormData();\n    formData.append(\"name\", form.name.trim());\n    formData.append(\"price\", Number(form.price));\n    formData.append(\"description\", form.description.trim());\n    formData.append(\"category\", form.category.trim());\n    formData.append(\"stock\", Number(form.stock));\n    if (file) formData.append(\"image\", file);\n    try {\n      setSubmitting(true);\n      setProgress(0);\n      await axios.put(`${API_BASE_URL}/api/products/${id}`, formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n          ...authHeader\n        },\n        onUploadProgress: evt => {\n          if (!evt.total) return;\n          setProgress(Math.round(evt.loaded * 100 / evt.total));\n        }\n      });\n      setBanner({\n        text: \"âœ… Product updated!\",\n        ok: true\n      });\n      setTimeout(() => navigate(\"/products\"), 600);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error(\"Update error:\", error);\n      const msg = (error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || \"Failed to update product.\";\n      setBanner({\n        text: msg,\n        ok: false\n      });\n    } finally {\n      setSubmitting(false);\n      setProgress(0);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    className: \"bg-gray-50 min-h-screen\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-3xl mx-auto px-4 py-8\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white p-6 md:p-8 rounded-xl ring-1 ring-black/5 shadow-[0_1px_2px_rgba(0,0,0,0.06),0_10px_20px_rgba(0,0,0,0.06)]\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-extrabold text-slate-900 mb-6\",\n          children: \"Edit Product\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"animate-pulse space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-6 bg-gray-200 rounded w-1/3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 sm:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-10 bg-gray-200 rounded\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"h-10 bg-gray-200 rounded\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-28 bg-gray-200 rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 204,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-48 bg-gray-200 rounded\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          encType: \"multipart/form-data\",\n          className: \"space-y-5\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium mb-1\",\n              children: \"Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"name\",\n              value: form.name,\n              onChange: handleChange,\n              placeholder: \"Product name\",\n              className: \"w-full px-3 py-2 border border-gray-200 rounded-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 sm:grid-cols-2 gap-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium mb-1\",\n                children: \"Price\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                name: \"price\",\n                min: \"0\",\n                step: \"0.01\",\n                value: form.price,\n                onChange: handleChange,\n                className: \"w-full px-3 py-2 border border-gray-200 rounded-lg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 225,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium mb-1\",\n                children: \"Stock\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                name: \"stock\",\n                min: \"0\",\n                step: \"1\",\n                value: form.stock,\n                onChange: handleChange,\n                className: \"w-full px-3 py-2 border border-gray-200 rounded-lg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium mb-1\",\n              children: \"Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"category\",\n              value: form.category,\n              onChange: handleChange,\n              list: \"category-suggestions\",\n              placeholder: \"e.g. Laptops\",\n              className: \"w-full px-3 py-2 border border-gray-200 rounded-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 252,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"datalist\", {\n              id: \"category-suggestions\",\n              children: SUGGESTED_CATEGORIES.map(c => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: c\n              }, c, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium mb-1\",\n              children: \"Description\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"description\",\n              value: form.description,\n              onChange: handleChange,\n              rows: 4,\n              placeholder: \"Brief description of the product\",\n              className: \"w-full px-3 py-2 border border-gray-200 rounded-lg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium mb-2\",\n              children: \"Image\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 282,\n              columnNumber: 17\n            }, this), (form.image || preview) && /*#__PURE__*/_jsxDEV(\"img\", {\n              src: preview || getProductImage(form.image),\n              alt: \"Current\",\n              className: \"w-full h-56 object-contain bg-gray-50 rounded-lg ring-1 ring-black/5 mb-3\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 19\n            }, this), !preview ? /*#__PURE__*/_jsxDEV(\"div\", {\n              onDrop: onDrop,\n              onDragOver: onDragOver,\n              className: \"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-indigo-400\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"file-input\",\n                type: \"file\",\n                accept: \"image/*\",\n                onChange: handleFileChange,\n                className: \"hidden\",\n                ref: fileInputRef\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 300,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"file-input\",\n                className: \"block cursor-pointer\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-gray-600\",\n                  children: [\"Drag & drop an image here, or\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-indigo-600 underline\",\n                    children: \"browse\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 311,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 309,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500 mt-1\",\n                  children: \"JPG/PNG recommended.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 313,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 308,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex gap-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: clearSelectedImage,\n                className: \"px-3 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 text-sm font-medium\",\n                children: \"Remove selected\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 318,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"file-replace\",\n                className: \"px-3 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold cursor-pointer\",\n                children: \"Replace\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 325,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"file-replace\",\n                type: \"file\",\n                accept: \"image/*\",\n                className: \"hidden\",\n                onChange: handleFileChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 317,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 15\n          }, this), submitting && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full bg-gray-200 rounded-full h-2\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bg-emerald-600 h-2 rounded-full transition-all\",\n              style: {\n                width: `${progress}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 344,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex gap-3 pt-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              disabled: submitting,\n              className: \"bg-emerald-600 hover:bg-emerald-700 disabled:opacity-60 text-white px-5 py-2.5 rounded-lg font-semibold\",\n              children: submitting ? \"Updatingâ€¦\" : \"Update Product\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              onClick: () => navigate(-1),\n              disabled: submitting,\n              className: \"bg-white border border-gray-200 hover:bg-gray-50 px-5 py-2.5 rounded-lg font-semibold\",\n              children: \"Cancel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 13\n        }, this), banner.text && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `mt-6 border rounded-lg px-4 py-3 text-sm ${banner.ok ? \"bg-emerald-50 text-emerald-700 border-emerald-200\" : \"bg-red-50 text-red-700 border-red-200\"}`,\n          children: banner.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 192,\n    columnNumber: 5\n  }, this);\n};\n_s(EditProduct, \"2283ETNfWPdN5zD7QwCXlkGrBXE=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = EditProduct;\nexport default EditProduct;\nvar _c;\n$RefreshReg$(_c, \"EditProduct\");","map":{"version":3,"names":["React","useEffect","useRef","useState","useNavigate","useParams","axios","API_BASE_URL","jsxDEV","_jsxDEV","SUGGESTED_CATEGORIES","EditProduct","_s","id","navigate","form","setForm","name","price","description","category","stock","image","file","setFile","preview","setPreview","loading","setLoading","submitting","setSubmitting","progress","setProgress","banner","setBanner","text","ok","token","localStorage","getItem","fileInputRef","authHeader","Authorization","getProductImage","img","test","startsWith","url","mounted","load","_product$price","_ref","_product$stock","product","data","get","Array","isArray","find","p","_id","countInStock","err","console","error","URL","revokeObjectURL","handleChange","e","value","target","Number","f","setImageFile","_f$type","_f$type$startsWith","type","call","createObjectURL","old","handleFileChange","_e$target$files","files","onDrop","_e$dataTransfer$files","preventDefault","stopPropagation","dataTransfer","onDragOver","clearSelectedImage","current","validate","trim","isNaN","handleSubmit","formData","FormData","append","put","headers","onUploadProgress","evt","total","Math","round","loaded","setTimeout","_error$response","_error$response$data","msg","response","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","encType","onChange","placeholder","min","step","list","map","c","rows","src","alt","accept","ref","htmlFor","onClick","style","width","disabled","_c","$RefreshReg$"],"sources":["D:/Quickcart/frontend/src/pages/EditProduct.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport API_BASE_URL from \"../utils/api\";\r\n\r\nconst SUGGESTED_CATEGORIES = [\r\n  \"Laptops\",\r\n  \"Phones\",\r\n  \"Headphones\",\r\n  \"Gaming\",\r\n  \"Home\",\r\n  \"Accessories\",\r\n];\r\n\r\nconst EditProduct = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    price: \"\",\r\n    description: \"\",\r\n    category: \"\",\r\n    stock: \"\",\r\n    image: \"\",\r\n  });\r\n\r\n  const [file, setFile] = useState(null);\r\n  const [preview, setPreview] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n  const [banner, setBanner] = useState({ text: \"\", ok: true });\r\n\r\n  const token = localStorage.getItem(\"token\");\r\n  const fileInputRef = useRef(null);\r\n\r\n  // Helpers\r\n  const authHeader = token ? { Authorization: `Bearer ${token}` } : {};\r\n\r\n  const getProductImage = (img) => {\r\n    if (!img) return \"/placeholder.jpg\";\r\n    if (typeof img === \"string\") {\r\n      if (/^https?:\\/\\//i.test(img)) return img;\r\n      return `${API_BASE_URL}${img.startsWith(\"/\") ? \"\" : \"/\"}${img}`;\r\n    }\r\n    if (img?.url) return img.url;\r\n    return \"/placeholder.jpg\";\r\n  };\r\n\r\n  // Load product\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    const load = async () => {\r\n      try {\r\n        setLoading(true);\r\n        // Prefer GET /api/products/:id; fall back to list if needed\r\n        let product;\r\n        try {\r\n          const { data } = await axios.get(`${API_BASE_URL}/api/products/${id}`);\r\n          product = data;\r\n        } catch {\r\n          const { data } = await axios.get(`${API_BASE_URL}/api/products`);\r\n          product = Array.isArray(data) ? data.find((p) => p._id === id) : null;\r\n        }\r\n\r\n        if (!product) {\r\n          setBanner({ text: \"Product not found.\", ok: false });\r\n          return;\r\n        }\r\n\r\n        if (!mounted) return;\r\n        setForm({\r\n          name: product.name || \"\",\r\n          price: product.price ?? \"\",\r\n          description: product.description || \"\",\r\n          category: product.category || \"\",\r\n          stock: product.stock ?? product.countInStock ?? \"\",\r\n          image: product.image || \"\",\r\n        });\r\n      } catch (err) {\r\n        console.error(\"Error fetching product:\", err);\r\n        setBanner({ text: \"Failed to load product.\", ok: false });\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    };\r\n    load();\r\n    return () => {\r\n      mounted = false;\r\n      if (preview) URL.revokeObjectURL(preview);\r\n    };\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [id]);\r\n\r\n  // Field handlers\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    // basic numeric guards\r\n    if (name === \"price\" && Number(value) < 0) return;\r\n    if (name === \"stock\" && Number(value) < 0) return;\r\n    setForm((f) => ({ ...f, [name]: value }));\r\n  };\r\n\r\n  const setImageFile = (f) => {\r\n    if (!f) return;\r\n    if (!f.type?.startsWith?.(\"image/\")) {\r\n      setBanner({ text: \"Please choose an image file.\", ok: false });\r\n      return;\r\n    }\r\n    setFile(f);\r\n    const url = URL.createObjectURL(f);\r\n    setPreview((old) => {\r\n      if (old) URL.revokeObjectURL(old);\r\n      return url;\r\n    });\r\n  };\r\n\r\n  const handleFileChange = (e) => setImageFile(e.target.files?.[0]);\r\n\r\n  // Drag & drop\r\n  const onDrop = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setImageFile(e.dataTransfer.files?.[0]);\r\n  };\r\n  const onDragOver = (e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n  };\r\n\r\n  const clearSelectedImage = () => {\r\n    setFile(null);\r\n    if (preview) URL.revokeObjectURL(preview);\r\n    setPreview(null);\r\n    if (fileInputRef.current) fileInputRef.current.value = \"\";\r\n  };\r\n\r\n  const validate = () => {\r\n    if (!form.name.trim()) return \"Name is required.\";\r\n    if (form.price === \"\" || isNaN(Number(form.price))) return \"Valid price is required.\";\r\n    if (!form.description.trim()) return \"Description is required.\";\r\n    if (!form.category.trim()) return \"Category is required.\";\r\n    if (form.stock === \"\" || isNaN(Number(form.stock))) return \"Valid stock is required.\";\r\n    return null;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const err = validate();\r\n    if (err) {\r\n      setBanner({ text: err, ok: false });\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"name\", form.name.trim());\r\n    formData.append(\"price\", Number(form.price));\r\n    formData.append(\"description\", form.description.trim());\r\n    formData.append(\"category\", form.category.trim());\r\n    formData.append(\"stock\", Number(form.stock));\r\n    if (file) formData.append(\"image\", file);\r\n\r\n    try {\r\n      setSubmitting(true);\r\n      setProgress(0);\r\n\r\n      await axios.put(`${API_BASE_URL}/api/products/${id}`, formData, {\r\n        headers: {\r\n          \"Content-Type\": \"multipart/form-data\",\r\n          ...authHeader,\r\n        },\r\n        onUploadProgress: (evt) => {\r\n          if (!evt.total) return;\r\n          setProgress(Math.round((evt.loaded * 100) / evt.total));\r\n        },\r\n      });\r\n\r\n      setBanner({ text: \"âœ… Product updated!\", ok: true });\r\n      setTimeout(() => navigate(\"/products\"), 600);\r\n    } catch (error) {\r\n      console.error(\"Update error:\", error);\r\n      const msg = error?.response?.data?.error || \"Failed to update product.\";\r\n      setBanner({ text: msg, ok: false });\r\n    } finally {\r\n      setSubmitting(false);\r\n      setProgress(0);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"bg-gray-50 min-h-screen\">\r\n      <div className=\"max-w-3xl mx-auto px-4 py-8\">\r\n        <div className=\"bg-white p-6 md:p-8 rounded-xl ring-1 ring-black/5 shadow-[0_1px_2px_rgba(0,0,0,0.06),0_10px_20px_rgba(0,0,0,0.06)]\">\r\n          <h2 className=\"text-2xl font-extrabold text-slate-900 mb-6\">Edit Product</h2>\r\n\r\n          {loading ? (\r\n            <div className=\"animate-pulse space-y-4\">\r\n              <div className=\"h-6 bg-gray-200 rounded w-1/3\" />\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                <div className=\"h-10 bg-gray-200 rounded\" />\r\n                <div className=\"h-10 bg-gray-200 rounded\" />\r\n              </div>\r\n              <div className=\"h-28 bg-gray-200 rounded\" />\r\n              <div className=\"h-48 bg-gray-200 rounded\" />\r\n            </div>\r\n          ) : (\r\n            <form onSubmit={handleSubmit} encType=\"multipart/form-data\" className=\"space-y-5\">\r\n              {/* Name */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Name</label>\r\n                <input\r\n                  name=\"name\"\r\n                  value={form.name}\r\n                  onChange={handleChange}\r\n                  placeholder=\"Product name\"\r\n                  className=\"w-full px-3 py-2 border border-gray-200 rounded-lg\"\r\n                />\r\n              </div>\r\n\r\n              {/* Price & Stock */}\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-1\">Price</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    name=\"price\"\r\n                    min=\"0\"\r\n                    step=\"0.01\"\r\n                    value={form.price}\r\n                    onChange={handleChange}\r\n                    className=\"w-full px-3 py-2 border border-gray-200 rounded-lg\"\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-1\">Stock</label>\r\n                  <input\r\n                    type=\"number\"\r\n                    name=\"stock\"\r\n                    min=\"0\"\r\n                    step=\"1\"\r\n                    value={form.stock}\r\n                    onChange={handleChange}\r\n                    className=\"w-full px-3 py-2 border border-gray-200 rounded-lg\"\r\n                  />\r\n                </div>\r\n              </div>\r\n\r\n              {/* Category */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Category</label>\r\n                <input\r\n                  name=\"category\"\r\n                  value={form.category}\r\n                  onChange={handleChange}\r\n                  list=\"category-suggestions\"\r\n                  placeholder=\"e.g. Laptops\"\r\n                  className=\"w-full px-3 py-2 border border-gray-200 rounded-lg\"\r\n                />\r\n                <datalist id=\"category-suggestions\">\r\n                  {SUGGESTED_CATEGORIES.map((c) => (\r\n                    <option key={c} value={c} />\r\n                  ))}\r\n                </datalist>\r\n              </div>\r\n\r\n              {/* Description */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-1\">Description</label>\r\n                <textarea\r\n                  name=\"description\"\r\n                  value={form.description}\r\n                  onChange={handleChange}\r\n                  rows={4}\r\n                  placeholder=\"Brief description of the product\"\r\n                  className=\"w-full px-3 py-2 border border-gray-200 rounded-lg\"\r\n                />\r\n              </div>\r\n\r\n              {/* Image */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium mb-2\">Image</label>\r\n\r\n                {/* Current image */}\r\n                {(form.image || preview) && (\r\n                  <img\r\n                    src={preview || getProductImage(form.image)}\r\n                    alt=\"Current\"\r\n                    className=\"w-full h-56 object-contain bg-gray-50 rounded-lg ring-1 ring-black/5 mb-3\"\r\n                  />\r\n                )}\r\n\r\n                {/* Uploader */}\r\n                {!preview ? (\r\n                  <div\r\n                    onDrop={onDrop}\r\n                    onDragOver={onDragOver}\r\n                    className=\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-indigo-400\"\r\n                  >\r\n                    <input\r\n                      id=\"file-input\"\r\n                      type=\"file\"\r\n                      accept=\"image/*\"\r\n                      onChange={handleFileChange}\r\n                      className=\"hidden\"\r\n                      ref={fileInputRef}\r\n                    />\r\n                    <label htmlFor=\"file-input\" className=\"block cursor-pointer\">\r\n                      <div className=\"text-sm text-gray-600\">\r\n                        Drag & drop an image here, or{\" \"}\r\n                        <span className=\"text-indigo-600 underline\">browse</span>\r\n                      </div>\r\n                      <div className=\"text-xs text-gray-500 mt-1\">JPG/PNG recommended.</div>\r\n                    </label>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"flex gap-2\">\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={clearSelectedImage}\r\n                      className=\"px-3 py-2 rounded-lg bg-gray-100 hover:bg-gray-200 text-sm font-medium\"\r\n                    >\r\n                      Remove selected\r\n                    </button>\r\n                    <label\r\n                      htmlFor=\"file-replace\"\r\n                      className=\"px-3 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold cursor-pointer\"\r\n                    >\r\n                      Replace\r\n                    </label>\r\n                    <input\r\n                      id=\"file-replace\"\r\n                      type=\"file\"\r\n                      accept=\"image/*\"\r\n                      className=\"hidden\"\r\n                      onChange={handleFileChange}\r\n                    />\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Progress */}\r\n              {submitting && (\r\n                <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                  <div\r\n                    className=\"bg-emerald-600 h-2 rounded-full transition-all\"\r\n                    style={{ width: `${progress}%` }}\r\n                  />\r\n                </div>\r\n              )}\r\n\r\n              {/* Actions */}\r\n              <div className=\"flex gap-3 pt-2\">\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={submitting}\r\n                  className=\"bg-emerald-600 hover:bg-emerald-700 disabled:opacity-60 text-white px-5 py-2.5 rounded-lg font-semibold\"\r\n                >\r\n                  {submitting ? \"Updatingâ€¦\" : \"Update Product\"}\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => navigate(-1)}\r\n                  disabled={submitting}\r\n                  className=\"bg-white border border-gray-200 hover:bg-gray-50 px-5 py-2.5 rounded-lg font-semibold\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n              </div>\r\n            </form>\r\n          )}\r\n\r\n          {/* Banner */}\r\n          {banner.text && (\r\n            <div\r\n              className={`mt-6 border rounded-lg px-4 py-3 text-sm ${\r\n                banner.ok\r\n                  ? \"bg-emerald-50 text-emerald-700 border-emerald-200\"\r\n                  : \"bg-red-50 text-red-700 border-red-200\"\r\n              }`}\r\n            >\r\n              {banner.text}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default EditProduct;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}